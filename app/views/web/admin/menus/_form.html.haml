#publish_modal.modal.fade{ role: :dialog, validationUrl: validate_admin_menu_path(@menu.date) }
  .modal-dialog{ role: :document }
    .modal-content
      .modal-header
        %button.close{ data: { dismiss: :modal } }
          %span{ aria: { hidden: true } }
            &times
        %h4
          = t('.publish_modal_header')
      .modal-body
        %p#in_validation_marker
          %span.glyphicon.glyphicon-refresh
          = t('.validation_in_progress')
        %p#validation_ok_marker
          %span.glyphicon.glyphicon-ok
          = t('.validation_ok')
        %p#validation_failed_marker
          %span.glyphicon.glyphicon-remove
          = t('.validation_failed')
        %ol#validation_errors
      .modal-footer
        = simple_form_for @menu, url: approve_admin_menu_path(@menu.date), method: :put do |f|
          = f.button :submit, value: t('.confirm'), id: 'publish_submit_btn', class: 'btn btn-primary', disabled: true

.text-center
  - unless @menu.ready
    %button{ id: 'publish_btn', class: 'btn btn-lg btn-success', data: { toggle: :modal, target: '#publish_modal' } }
      = t('.publish_menu')
    %br
    %br

= simple_form_for @menu, url: admin_menu_path(@menu.date), method: :put do |f|
  .row
    .col-md-12
      = f.error_notification

      = f.simple_fields_for :menu_dishes do |menu_dish|
        = render 'menu_dish_fields', f: menu_dish

      .links.text-right
        = link_to_add_association t('.add_dish'), f, :menu_dishes, class: 'btn btn-lg btn-info'

      %br
      .well
        .pull-left
          = f.button :submit, value: t('.save'), class: 'btn btn-lg btn-primary'
        .clearfix
